# VPP to Wireshark Bridge

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE-2.0.txt)
[![GitHub release](https://img.shields.io/github/release/wapxmas/vpp_wireshark_bridge.svg)](https://github.com/wapxmas/vpp_wireshark_bridge/releases/)
[![Maintenance](https://img.shields.io/badge/Maintained%3F-yes-green.svg)](https://github.com/wapxmas/vpp_wireshark_bridge/graphs/commit-activity)

> *–ú–æ—Å—Ç –º–µ–∂–¥—É VPP (Vector Packet Processing, fd.io) –∏ Wireshark, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ VPP –≤ Wireshark —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å extcap, –¥–∞–∂–µ –µ—Å–ª–∏ VPP –∏ Wireshark –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö.*

[English](README_EN.md) | –†—É—Å—Å–∫–∏–π

<div align="center">
  <h1 style="font-size: 36px; font-weight: bold; color: #2c3e50;">
    üîÑ VPP to Wireshark Bridge
  </h1>
</div>

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä](#–∫—Ä–∞—Ç–∫–∏–π-–æ–±–∑–æ—Ä)
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢–∏–ø—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π](#—Ç–∏–ø—ã-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ VPP](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–ø–ª–∞–≥–∏–Ω–∞-vpp)
  - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ VPP –∞–≥–µ–Ω—Ç–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-vpp-–∞–≥–µ–Ω—Ç–∞)
  - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –º–æ—Å—Ç–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-python-–º–æ—Å—Ç–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
  - [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ vppctl](#–ø—Ä—è–º–æ–µ-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—á–µ—Ä–µ–∑-vppctl)
  - [–ó–∞–ø—É—Å–∫ VPP –∞–≥–µ–Ω—Ç–∞](#–∑–∞–ø—É—Å–∫-vpp-–∞–≥–µ–Ω—Ç–∞)
  - [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Wireshark](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–≤-wireshark)
  - [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ REST API](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—á–µ—Ä–µ–∑-rest-api)
- [–û—Ç–ª–∞–¥–∫–∞](#–æ—Ç–ª–∞–¥–∫–∞)
- [–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)](#—á–∞—Å—Ç–æ-–∑–∞–¥–∞–≤–∞–µ–º—ã–µ-–≤–æ–ø—Ä–æ—Å—ã-faq)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
- [–í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç](#–≤–∫–ª–∞–¥-–≤-–ø—Ä–æ–µ–∫—Ç)
- [–ê–≤—Ç–æ—Ä—ã](#–∞–≤—Ç–æ—Ä—ã)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

## üöÄ –ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä

VPP to Wireshark Bridge ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ VPP –≤ Wireshark –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –û–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **–ü–ª–∞–≥–∏–Ω VPP** - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –º–æ—Å—Ç
2. **VPP –∞–≥–µ–Ω—Ç** - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
3. **Python –º–æ—Å—Ç** - –ø–µ—Ä–µ–¥–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç –ø–ª–∞–≥–∏–Ω–∞ VPP –≤ Wireshark —á–µ—Ä–µ–∑ extcap

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
flowchart LR
    subgraph VPP_Machine["–ú–∞—à–∏–Ω–∞ —Å VPP"]
        VPP_Plugin["VPP –ü–ª–∞–≥–∏–Ω"]
        VPP_Agent["VPP Agent"]
        
        VPP_Plugin <-- "Unix Socket" --> VPP_Agent
        VPP_Agent <-- "vppctl" --> VPP_Plugin
    end
    
    subgraph Wireshark_Machine["–ú–∞—à–∏–Ω–∞ —Å Wireshark"]
        Extcap_Bridge["Extcap –ú–æ—Å—Ç"]
        Wireshark["Wireshark"]
        
        Extcap_Bridge --> Wireshark
    end
    
    VPP_Agent <---> |"REST API"| Extcap_Bridge
    VPP_Agent --> |"UDP –¢—Ä–∞—Ñ–∏–∫"| Extcap_Bridge
```

<div align="center">
<img src="docs/images/wireshark_capture.png" alt="–ü—Ä–∏–º–µ—Ä –∑–∞—Ö–≤–∞—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ Wireshark" width="600"/>
</div>

## üîå –¢–∏–ø—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

–ü–ª–∞–≥–∏–Ω VPP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:

| –¢–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è |
|----------------|----------|--------|-------------------|
| **TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ IP –∏ –ø–æ—Ä—Ç—É | `192.168.1.100:9000` | –û–±—ã—á–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ |
| **Unix —Å–æ–∫–µ—Ç—ã** | –õ–æ–∫–∞–ª—å–Ω—ã–µ Unix-—Å–æ–∫–µ—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ | `/var/run/wireshark.sock` | VPP –≤–Ω—É—Ç—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ namespace |

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- VPP (fd.io) 21.01 –∏–ª–∏ –≤—ã—à–µ
- Wireshark 3.4 –∏–ª–∏ –≤—ã—à–µ
- Python 3.6 –∏–ª–∏ –≤—ã—à–µ
- –î–ª—è Windows: pywin32 –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/wapxmas/vpp_wireshark_bridge.git
cd vpp_wireshark_bridge

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r vpp_agent/requirements.txt
pip install -r extcap_bridge/requirements.txt

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å VPP –∞–≥–µ–Ω—Ç (–Ω–∞ –º–∞—à–∏–Ω–µ —Å VPP)
./vpp_agent/vpp_agent.py --host 0.0.0.0 --port 8080

# 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å extcap –º–æ—Å—Ç –¥–ª—è Wireshark (–Ω–∞ –º–∞—à–∏–Ω–µ —Å Wireshark)
# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –º–æ—Å—Ç–∞"

# 5. –û—Ç–∫—Ä—ã—Ç—å Wireshark –∏ –≤—ã–±—Ä–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å VPP –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ VPP

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `vpp_plugin/wireshark_bridge` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `src/plugins` –≤–∞—à–µ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ VPP.
2. –î–æ–±–∞–≤—å—Ç–µ `wireshark_bridge` –≤ —Å–ø–∏—Å–æ–∫ –ø–ª–∞–≥–∏–Ω–æ–≤ –≤ —Ñ–∞–π–ª–µ `src/plugins/CMakeLists.txt`:
   ```cmake
   add_subdirectory(wireshark_bridge)
   ```
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ VPP:
   ```bash
   make build
   make install
   ```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ VPP –∞–≥–µ–Ω—Ç–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `vpp_agent` –Ω–∞ –º–∞—à–∏–Ω—É —Å VPP.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r vpp_agent/requirements.txt
   ```
3. –°–¥–µ–ª–∞–π—Ç–µ —Ñ–∞–π–ª –∞–≥–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
   ```bash
   chmod +x vpp_agent/vpp_agent.py
   ```
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≥–µ–Ω—Ç:
   ```bash
   ./vpp_agent/vpp_agent.py --host 0.0.0.0 --port 8080 --debug
   ```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞ VPP –∞–≥–µ–Ω—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|------------------------|
| `--host IP` | IP-–∞–¥—Ä–µ—Å –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è | 0.0.0.0 |
| `--port PORT` | –ü–æ—Ä—Ç –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è | 8080 |
| `--debug` | –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | False |
| `--vppcmd COMMAND` | –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å VPP | vppctl |
| `--unix-socket PATH` | –ü—É—Ç—å –∫ Unix-—Å–æ–∫–µ—Ç—É –¥–ª—è –ø—Ä–æ–∫—Å–∏-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | None |
| `--bridge-address ADDR` | –ê–¥—Ä–µ—Å –º–æ—Å—Ç–∞ –¥–ª—è –ø—Ä–æ–∫—Å–∏-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | None |

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –º–æ—Å—Ç–∞

<details>
<summary>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Linux</summary>

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–ª—è Python —Å–∫—Ä–∏–ø—Ç–∞ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
mkdir -p ~/vpp_wireshark_bridge
cp extcap_bridge/vpp_extcap_bridge.py ~/vpp_wireshark_bridge/
cd ~/vpp_wireshark_bridge/
python3 -m venv .env
source .env/bin/activate
pip install -r /–ø—É—Ç—å/–∫/extcap_bridge/requirements.txt
deactivate

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ wrapper-—Å–∫—Ä–∏–ø—Ç–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é extcap
# –î–ª—è x86_64 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
sudo cp extcap_bridge/vpp_bridge_wrapper.sh /usr/lib/wireshark/extcap/
sudo chmod +x /usr/lib/wireshark/extcap/vpp_bridge_wrapper.sh

# –î–ª—è ARM64 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
sudo cp extcap_bridge/vpp_bridge_wrapper.sh /usr/lib/aarch64-linux-gnu/wireshark/extcap/
sudo chmod +x /usr/lib/aarch64-linux-gnu/wireshark/extcap/vpp_bridge_wrapper.sh
```
</details>

<details>
<summary>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è macOS</summary>

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–ª—è Python —Å–∫—Ä–∏–ø—Ç–∞ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
mkdir -p ~/vpp_wireshark_bridge
cp extcap_bridge/vpp_extcap_bridge.py ~/vpp_wireshark_bridge/
cd ~/vpp_wireshark_bridge/
python3 -m venv .env
source .env/bin/activate
pip install -r /–ø—É—Ç—å/–∫/extcap_bridge/requirements.txt
deactivate

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ wrapper-—Å–∫—Ä–∏–ø—Ç–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é extcap
sudo cp extcap_bridge/vpp_bridge_wrapper.sh /Applications/Wireshark.app/Contents/MacOS/extcap/
sudo chmod +x /Applications/Wireshark.app/Contents/MacOS/extcap/vpp_bridge_wrapper.sh
```
</details>

<details>
<summary>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Windows</summary>

```batch
REM –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–ª—è Python —Å–∫—Ä–∏–ø—Ç–∞ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
mkdir "%USERPROFILE%\vpp_wireshark_bridge"
copy extcap_bridge\vpp_extcap_bridge.py "%USERPROFILE%\vpp_wireshark_bridge\"
cd "%USERPROFILE%\vpp_wireshark_bridge"
python -m venv .env
.env\Scripts\activate
pip install -r –ø—É—Ç—å\–∫\extcap_bridge\requirements.txt
deactivate

REM –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ wrapper-—Å–∫—Ä–∏–ø—Ç–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é extcap
copy extcap_bridge\vpp_bridge_wrapper.bat "%APPDATA%\Wireshark\extcap\"
```
</details>

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ vppctl

<details>
<summary>–ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ vppctl</summary>

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —á–µ—Ä–µ–∑ TCP —Å–æ–∫–µ—Ç (IP:–ø–æ—Ä—Ç)
vppctl wireshark bridge enable GigabitEthernet0/0/0 192.168.1.100:9000

# –í–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —á–µ—Ä–µ–∑ Unix —Å–æ–∫–µ—Ç
vppctl wireshark bridge enable GigabitEthernet0/0/0 /var/run/wireshark.sock

# –í–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–ª—å–∫–æ –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ TCP —Å–æ–∫–µ—Ç
vppctl wireshark bridge enable GigabitEthernet0/0/0 192.168.1.100:9000 rx

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
vppctl wireshark bridge disable GigabitEthernet0/0/0

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
vppctl wireshark bridge stats
```
</details>

### –ó–∞–ø—É—Å–∫ VPP –∞–≥–µ–Ω—Ç–∞

```bash
# –ù–∞ –º–∞—à–∏–Ω–µ —Å VPP
./vpp_agent/vpp_agent.py --host 0.0.0.0 --port 8080 --debug
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Wireshark

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Wireshark.
2. –í —Å–ø–∏—Å–∫–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤—ã —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã VPP.
3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
4. –ù–∞–∂–º–∏—Ç–µ "Start" –¥–ª—è –Ω–∞—á–∞–ª–∞ –∑–∞—Ö–≤–∞—Ç–∞ –ø–∞–∫–µ—Ç–æ–≤.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ REST API

<details>
<summary>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ REST API</summary>

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
curl http://vpp-host:8080/interfaces

# –í–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ TCP —Å–æ–∫–µ—Ç (–æ–±–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
curl -X POST -H "Content-Type: application/json" -d '{"interface":"GigabitEthernet0/0/0","bridge_address":"wireshark-host:9000","direction":"both"}' http://vpp-host:8080/enable

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
curl -X POST -H "Content-Type: application/json" -d '{"interface":"GigabitEthernet0/0/0"}' http://vpp-host:8080/disable

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
curl http://vpp-host:8080/stats
```
</details>

## üêû –û—Ç–ª–∞–¥–∫–∞

<details>
<summary>–û—Ç–ª–∞–¥–∫–∞ VPP –∞–≥–µ–Ω—Ç–∞</summary>

```bash
./vpp_agent/vpp_agent.py --debug
```

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥.
</details>

<details>
<summary>–û—Ç–ª–∞–¥–∫–∞ Python –º–æ—Å—Ç–∞</summary>

```bash
python3 extcap_bridge/vpp_extcap_bridge.py --debug --vpp-host=vpp-host --vpp-port=8080 --direction=both --capture --interface=vpp_1 --fifo=/tmp/wireshark_pipe
```

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `vpp_extcap_bridge.log` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.
</details>

<details>
<summary>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏</summary>

**UDP Listener (utils/udp_listener.py)** - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è UDP-–ø–∞–∫–µ—Ç–æ–≤:
```bash
python3 utils/udp_listener.py --port 9000 --show-hex
```
</details>

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)

<details>
<summary>Q: –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ VPP –∞–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ?</summary>

A: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:
```bash
curl http://vpp-host:8080/interfaces
```
–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ VPP.
</details>

<details>
<summary>Q: –ö–∞–∫–æ–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å VPP –æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–ª–∞–≥–∏–Ω?</summary>

A: –ü–ª–∞–≥–∏–Ω –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å VPP. –í –Ω–∞—à–∏—Ö —Ç–µ—Å—Ç–∞—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–µ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 1-2% –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º –ø–ª–∞–≥–∏–Ω–µ.
</details>

<details>
<summary>Q: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ –∑–∞—Ö–≤–∞—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö?</summary>

A: –î–∞, –ø–ª–∞–≥–∏–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞—Ö–≤–∞—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –≤—Å–µ—Ö —Ç–∏–ø–∞—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ VPP, –≤–∫–ª—é—á–∞—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ.
</details>

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

<details>
<summary>–ü—Ä–æ–±–ª–µ–º–∞: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã VPP –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Wireshark</summary>

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ VPP –∞–≥–µ–Ω—Ç –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–µ—Ç–∏.
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Å–∫—Ä–∏–ø—Ç—É –≤ wrapper-—Ñ–∞–π–ª–µ.
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞.
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Wireshark.
</details>

<details>
<summary>–ü—Ä–æ–±–ª–µ–º–∞: –ü–∞–∫–µ—Ç—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –æ—Ç VPP –∫ Wireshark</summary>

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫.
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å UDP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –º–∞—à–∏–Ω–∞–º–∏.
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ VPP –∞–≥–µ–Ω—Ç–∞ –∏ –º–æ—Å—Ç–∞.
</details>

<details>
<summary>–ü—Ä–æ–±–ª–µ–º–∞: UDP-–ø–∞–∫–µ—Ç—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –Ω–∞ Windows</summary>

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–æ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞, —Ä–∞–∑—Ä–µ—à–∞—é—â–µ–µ –≤—Ö–æ–¥—è—â–∏–π UDP-—Ç—Ä–∞—Ñ–∏–∫:
```batch
netsh advfirewall firewall add rule name="Allow UDP Port 9000" dir=in action=allow protocol=UDP localport=9000
```
</details>

## üíª –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–í–∫–ª–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º:

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –≤–∞—à–µ–π —Ñ–∏—á–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–∞—à—É –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–º. –≤ —Ñ–∞–π–ª–µ [CONTRIBUTING.md](CONTRIBUTING.md).

## üë• –ê–≤—Ç–æ—Ä—ã

* **–°–µ—Ä–≥–µ–π –Ø—à–∏–Ω** - *–ù–∞—á–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞* - [GitHub –ø—Ä–æ—Ñ–∏–ª—å](https://github.com/wapxmas)

–°–º–æ—Ç—Ä–∏—Ç–µ —Ç–∞–∫–∂–µ —Å–ø–∏—Å–æ–∫ [—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤](https://github.com/wapxmas/vpp_wireshark_bridge/contributors), –∫–æ—Ç–æ—Ä—ã–µ –≤–Ω–µ—Å–ª–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ Apache License 2.0 - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE-2.0.txt) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

<div align="center">
üåü <a href="https://github.com/wapxmas/vpp_wireshark_bridge">–ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub</a> –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏! üåü
</div> 